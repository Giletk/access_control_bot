# Бот-модератор для контроля доступа пользователей группы

Для работы бота необходимо создать конфигурационный файл __.env__\
Формат __.env__ файла:

```
bot_token=123456789:AAbbCCdd54321
DB_HOST=127.0.0.1
DB_PORT=5432
DB_NAME=postgres_db_name
DB_USER=postgres_db_username
DB_PASSWORD=postgres_db_password
```
## Принцип работы бота

Чтобы бот начал следить за разрешёнными пользователями нужно добавить его в беседу и написать команду /start@bot_nickname (для удобства команда генерируется автоматически, если написать /start в личной беседе с ботом).

После запуска бот начнёт собирать информацию об участниках чата. Поскольку Telegram API не предусматривает доступ ботов к списку участников групп, бот будет следить за событиями удаления и добавления пользователя в группу и составлять собственный список участников, храня его в таблице **users** в базе данных PostgreSQL.

Информацию о разрешённых пользователях бот берёт из таблицы **allowed_users** той же базы данных. <mark>Таблицу **allowed_users** необходимо предварительно заполнить</mark> никнеймами пользователей **без '@' в начале**   (Было бы вернее использовать уникальные и неизменяемые id пользователей telegram, но для удобства демонстрации остановимся на никах).

После запуска в группе бот будет раз в определённое время сверять информацию из составленной им таблицы пользователей с иформацией из таблицы с разрешёнными пользователями. Если в группе будут найдены пользователи, не найденный в списке разрешённых, бот отправит сообщение администратору группы, который запустил его.

Всю остальную информацию по работе с ботом можно получить написав команду **/start** в личном чате с ботом.
